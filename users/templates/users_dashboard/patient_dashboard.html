{% load static %}

<!DOCTYPE html>
<html lang="en" class="">
  <head>
    <meta name="csrf-token" content="{{ csrf_token }}" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patient Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
    />
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>
    <link
      rel="stylesheet"
      href="{% static 'users_style/patient_dashboard/styles.css' %}"
    />
    <script>
      tailwind.config = {
        darkMode: "class",
      };
    </script>

    <style>
      .avatar-input {
        display: none;
      }
      .avatar-preview {
        width: 96px;
        height: 96px;
        object-fit: cover;
        border-radius: 9999px;
        border: 2px solid rgba(0, 0, 0, 0.06);
      }
      @media print {
        .no-print {
          display: none !important;
        }
        body {
          background: white;
        }
      }
    </style>
  </head>
  <body
    class="flex h-screen overflow-hidden bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300"
  >
    <aside
      id="sidebar"
      class="sidebar sidebar-expanded bg-white dark:bg-gray-800 shadow-xl flex flex-col space-y-2 border-r border-gray-200 dark:border-gray-700 fixed inset-y-0 left-0 z-30 overflow-y-auto"
    >
      <div
        class="h-16 flex items-center justify-center px-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0"
      >
        <a href="{% url 'home-page' %}">
          <div class="flex items-center">
            <svg
              class="h-10 w-10 text-blue-600 dark:text-blue-500"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"
              />
            </svg>
            <span
              class="sidebar-logo-text ml-3 text-2xl font-bold text-gray-800 dark:text-white"
              >PMS</span
            >
          </div>
        </a>
      </div>

      <nav class="flex-grow px-2 space-y-1 pt-2">
        <a
          href="#"
          onclick="dashboard()"
          data-section="dashboard"
          class="sidebar-link active flex items-center py-2.5 px-4 rounded-lg hover:bg-blue-500 hover:text-white dark:hover:bg-blue-600 group"
        >
          <ion-icon
            name="grid-outline"
            class="text-xl text-gray-500 dark:text-gray-400 group-hover:text-white"
          ></ion-icon>
          <span class="sidebar-text ml-3 text-sm font-medium">Dashboard</span>
        </a>
        <a
          href="#"
          onclick="load_All_pescriptions()"
          data-section="patients"
          class="sidebar-link flex items-center py-2.5 px-4 rounded-lg hover:bg-blue-500 hover:text-white dark:hover:bg-blue-600 group"
        >
          <ion-icon
            name="people-outline"
            class="text-xl text-gray-500 dark:text-gray-400 group-hover:text-white"
          ></ion-icon>
          <span class="sidebar-text ml-3 text-sm font-medium"
            >Pescriptions</span
          >
        </a>
        <a
          href="#"
          onclick="set_patient_total_unique_doctors_ditels()"
          data-section="doctors"
          class="sidebar-link flex items-center py-2.5 px-4 rounded-lg hover:bg-blue-500 hover:text-white dark:hover:bg-blue-600 group"
        >
          <ion-icon
            name="medkit-outline"
            class="text-xl text-gray-500 dark:text-gray-400 group-hover:text-white"
          ></ion-icon>
          <span class="sidebar-text ml-3 text-sm font-medium"
            >View Doctors</span
          >
        </a>
        <a
          href="#"
          data-section="appointments"
          class="sidebar-link flex items-center py-2.5 px-4 rounded-lg hover:bg-blue-500 hover:text-white dark:hover:bg-blue-600 group"
        >
          <ion-icon
            name="calendar-outline"
            class="text-xl text-gray-500 dark:text-gray-400 group-hover:text-white"
          ></ion-icon>
          <span class="sidebar-text ml-3 text-sm font-medium"
            >Appointments</span
          >
        </a>
        <a
          href="#"
          data-section="billing"
          class="sidebar-link flex items-center py-2.5 px-4 rounded-lg hover:bg-blue-500 hover:text-white dark:hover:bg-blue-600 group"
        >
          <ion-icon
            name="card-outline"
            class="text-xl text-gray-500 dark:text-gray-400 group-hover:text-white"
          ></ion-icon>
          <span class="sidebar-text ml-3 text-sm font-medium"
            >Billing & Invoices</span
          >
        </a>
        <a
          href="#"
          data-section="pharmacy"
          class="sidebar-link flex items-center py-2.5 px-4 rounded-lg hover:bg-blue-500 hover:text-white dark:hover:bg-blue-600 group"
        >
          <ion-icon
            name="flask-outline"
            class="text-xl text-gray-500 dark:text-gray-400 group-hover:text-white"
          ></ion-icon>
          <span class="sidebar-text ml-3 text-sm font-medium">Medicines</span>
        </a>
        <a
          href="#"
          data-section="records"
          class="sidebar-link flex items-center py-2.5 px-4 rounded-lg hover:bg-blue-500 hover:text-white dark:hover:bg-blue-600 group"
        >
          <ion-icon
            name="document-text-outline"
            class="text-xl text-gray-500 dark:text-gray-400 group-hover:text-white"
          ></ion-icon>
          <span class="sidebar-text ml-3 text-sm font-medium">Reports</span>
        </a>
      </nav>

      <div class="mt-auto p-4 border-t border-gray-200 dark:border-gray-700">
        <div class="flex items-center">
          <img
            src="https://www.codewithfaraz.com/tools/placeholder?size=32&text=EC"
            alt="User Avatar"
            class="h-10 w-10 rounded-full object-cover"
          />
          <div class="profile-info ml-3">
            <p
              id="patient_name_02"
              class="text-sm font-medium text-gray-800 dark:text-white"
            >
              Null
              <input id="get_user_id" hidden value="{{request.user.id}}" />
            </p>
            <p class="text-xs text-gray-500 dark:text-gray-400">Patient</p>
          </div>
        </div>

        <div class="flex items-center">
          <a href="{% url 'logout' %}">
            <button
              class="w-full mt-3 flex items-center justify-center py-2 px-4 rounded-lg text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-gray-700"
            >
              <ion-icon name="log-out-outline" class="text-lg mr-2"></ion-icon>
              <span class="sidebar-text">Logout</span>
            </button>
          </a>
        </div>
      </div>
    </aside>

    <div
      id="mainContent"
      class="flex-1 flex flex-col overflow-hidden transition-all duration-300 ease-in-out ml-64"
    >
      <header
        class="h-16 bg-white dark:bg-gray-800 shadow-md flex items-center justify-between px-6 flex-shrink-0 border-b border-gray-200 dark:border-gray-700"
      >
        <div class="flex items-center">
          <button
            id="sidebarToggle"
            class="flex p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500"
          >
            <ion-icon name="menu-outline" class="text-2xl"></ion-icon>
          </button>
          <div class="relative ml-4 hidden sm:block">
            <span class="absolute inset-y-0 left-0 pl-3 flex items-center">
              <ion-icon name="search-outline" class="text-gray-400"></ion-icon>
            </span>
            <input
              type="text"
              placeholder="Search..."
              class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-blue-500 focus:border-blue-500 text-sm"
            />
          </div>
        </div>
        <div class="flex items-center space-x-4">
          <button
            id="darkModeToggle"
            class="flex p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none"
          >
            <ion-icon
              name="moon-outline"
              id="darkModeIcon"
              class="text-xl"
            ></ion-icon>
          </button>
          <button
            class="flex relative p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none"
          >
            <ion-icon name="notifications-outline" class="text-xl"></ion-icon>
            <span
              class="absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"
            ></span>
          </button>
          <div class="relative">
            <button
              id="userMenuButton"
              class="flex items-center space-x-2 focus:outline-none"
            >
              <img
                src="https://www.codewithfaraz.com/tools/placeholder?size=32&text=EC"
                alt="User Avatar"
                class="h-8 w-8 rounded-full object-cover"
              />
              <span
                id="patient_name_01"
                class="hidden md:inline text-sm font-medium text-gray-700 dark:text-gray-300"
                >Null</span
              >
              <ion-icon
                name="chevron-down-outline"
                class="hidden md:inline text-xs text-gray-500 dark:text-gray-400"
              ></ion-icon>
            </button>
            <div
              id="userMenu"
              class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 hidden ring-1 ring-black ring-opacity-5 z-10"
            >
              <a
                href="#"
                onclick="set_patient_profile_ditels()"
                data-section="profileView"
                class="sidebar-link block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"
                >My Profile</a
              >
              <a
                href="#"
                class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"
                >Settings</a
              >
              <a
                href="{% url 'logout' %}"
                class="block px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700"
                >Logout</a
              >
            </div>
          </div>
        </div>
      </header>

      <main class="flex-1 overflow-x-hidden overflow-y-auto p-6 space-y-6">
        <!--++++++++++ using for profile view start-->

        <!-- Profile view -->
        <section id="profileView" class="content-section" data-aos="fade-up">
          <div
            class="bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl shadow-xl rounded-2xl p-8 grid gap-8 grid-cols-1 md:grid-cols-3 transition-all duration-300"
          >
            <!-- Left: Avatar -->
            <section
              class="md:col-span-1 flex flex-col items-center gap-6 p-6 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 dark:from-indigo-700/20 dark:to-purple-700/20 rounded-2xl shadow-lg border border-white/10"
            >
              <div class="relative w-36 h-36 sm:w-40 sm:h-40">
                <img
                  id="viewAvatar"
                  src="https://placehold.co/150x150?text=Avatar"
                  alt="avatar"
                  class="w-full h-full rounded-full object-cover border-4 border-white shadow-md"
                />
              </div>

              <div class="text-center">
                <p
                  id="profileName"
                  class="text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Null
                </p>
                <p
                  id="profileBloodGroup1"
                  class="text-sm text-gray-500 dark:text-gray-300"
                >
                  Null
                </p>
              </div>

              <a href="#" data-section="profileEdit" class="sidebar-link">
                <button
                  class="rounded-lg bg-indigo-600 px-4 py-2 font-medium text-white hover:bg-indigo-700 transition"
                >
                  Edit Profile
                </button>
              </a>
            </section>

            <!-- Right: Details text instead of inputs -->
            <section class="md:col-span-2 grid gap-6">
              <!-- Row 1 -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                {% comment %}
                <div>
                  <p
                    class="text-sm font-medium text-gray-700 dark:text-gray-200"
                  >
                    Full Name
                  </p>
                  <p
                    id="profileFullName"
                    class="mt-1 text-gray-600 dark:text-gray-300"
                  >
                    Null
                  </p>
                </div>
                {% endcomment %}

                <div>
                  <p
                    class="text-sm font-medium text-gray-700 dark:text-gray-200"
                  >
                    Phone
                  </p>
                  <p
                    id="profilePhone"
                    class="mt-1 text-gray-600 dark:text-gray-300"
                  >
                    +8801...
                  </p>
                </div>

                <div>
                  <p
                    class="text-sm font-medium text-gray-700 dark:text-gray-200"
                  >
                    Email
                  </p>
                  <p
                    id="profileEmail"
                    class="mt-1 text-gray-600 dark:text-gray-300"
                  >
                    you@example.com
                  </p>
                </div>
              </div>

              <!-- Row 2 -->
              <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div>
                  <p
                    class="text-sm font-medium text-gray-700 dark:text-gray-200"
                  >
                    Blood Group
                  </p>
                  <p
                    id="profileBloodGroup2"
                    class="mt-1 text-gray-600 dark:text-gray-300"
                  >
                    Null
                  </p>
                </div>

                <div>
                  <p
                    class="text-sm font-medium text-gray-700 dark:text-gray-200"
                  >
                    Pescription Status
                  </p>
                  <p
                    id="profilePescriptionStatus"
                    class="mt-1 text-gray-600 dark:text-gray-300"
                  >
                    Null
                  </p>
                </div>
                <div>
                  <p
                    class="text-sm font-medium text-gray-700 dark:text-gray-200"
                  >
                    Gender
                  </p>
                  <p
                    id="profileGender"
                    class="mt-1 text-gray-600 dark:text-gray-300"
                  >
                    Null
                  </p>
                </div>
                <div>
                  <p
                    class="text-sm font-medium text-gray-700 dark:text-gray-200"
                  >
                    Age
                  </p>
                  <p
                    id="profileAge"
                    class="mt-1 text-gray-600 dark:text-gray-300"
                  >
                    Null
                  </p>
                </div>
              </div>

              <!-- Address -->
              <div>
                <p class="text-sm font-medium text-gray-700 dark:text-gray-200">
                  Address
                </p>
                <p
                  id="profileAddress"
                  class="mt-1 text-gray-600 dark:text-gray-300"
                >
                  Street, City, Country
                </p>
              </div>

              <!-- Bio -->
              <div>
                <p class="text-sm font-medium text-gray-700 dark:text-gray-200">
                  Short Bio
                </p>
                <p
                  id="profileShortBio"
                  class="mt-1 text-gray-600 dark:text-gray-300 leading-relaxed"
                >
                  A short professional profile...
                </p>
              </div>

              <!-- Stats -->
              <div class="flex gap-6 mt-4">
                <p class="text-sm text-gray-600 dark:text-gray-300">
                  <span class="font-medium">Followers:</span> 2.5k
                </p>
                <p class="text-sm text-gray-600 dark:text-gray-300">
                  <span class="font-medium">Articles:</span> 13
                </p>
                <p class="text-sm text-gray-600 dark:text-gray-300">
                  <span class="font-medium">Papers:</span> 7
                </p>
              </div>
            </section>
          </div>
        </section>

        <!-- Profile edit form -->
        <section id="profileEdit" class="content-section" data-aos="fade-up">
          <form
            id="patientProfileForm"
            class="bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl shadow-xl rounded-2xl p-8 grid gap-8 grid-cols-1 md:grid-cols-3 transition-all duration-300"
          >
            <!-- Left: avatar -->
            <section
              class="md:col-span-1 flex flex-col items-center gap-6 p-6 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 dark:from-indigo-700/20 dark:to-purple-700/20 rounded-2xl shadow-lg border border-white/10"
            >
              <div class="relative w-36 h-36 sm:w-40 sm:h-40">
                <img
                  id="avatarPreview"
                  src="https://placehold.co/150x150?text=Avatar"
                  alt="avatar"
                  class="w-full h-full rounded-full object-cover border-4 border-white shadow-md"
                />
                <label
                  for="avatarInput"
                  class="absolute bottom-2 right-2 bg-indigo-600 text-white rounded-full p-2 shadow-md cursor-pointer no-print hover:bg-indigo-700 transition"
                  title="Change avatar"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path
                      d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9.414A2 2 0 0016.414 8L12 3.586A2 2 0 0010.586 3H4z"
                    />
                  </svg>
                </label>
                <input
                  id="avatarInput"
                  class="avatar-input"
                  type="file"
                  accept="image/*"
                />
              </div>
              <div class="text-center text-sm text-gray-600 dark:text-gray-300">
                Accepted: JPG, PNG. Max 2MB
              </div>
              <div class="text-center">
                <p
                  id="editProfileName"
                  class="text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Null
                </p>
                <p
                  id="editProfileBloodGroup1"
                  class="text-sm text-gray-500 dark:text-gray-300"
                >
                  Null
                </p>
              </div>
            </section>

            <!-- Right: fields -->
            <section class="md:col-span-2 grid gap-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="text-sm font-medium">Fast name</label>
                  <input
                    name="full_name"
                    id="editProfileFastName"
                    required
                    class="dark:text-black mt-1 block w-1/2 rounded-md border-gray-200 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                    placeholder=" Dr. "
                  />
                </div>
                <div>
                  <label class="text-sm font-medium">Last name</label>
                  <input
                    name="full_name"
                    id="editProfileLastName"
                    required
                    class="dark:text-black mt-1 block w-full rounded-md border-gray-200 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                    placeholder="Masud"
                  />
                </div>
                <div>
                  <label class="text-sm font-medium">Email</label>
                  <input
                    type="email"
                    name="email"
                    id="editProfileEmail"
                    required
                    class="dark:text-black mt-1 block w-full rounded-md border-gray-200 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                    placeholder="you@example.com"
                  />
                </div>
                <div>
                  <label class="text-sm font-medium">Phone</label>
                  <input
                    required
                    name="phone"
                    id="editProfilePhone"
                    class="dark:text-black mt-1 block w-full rounded-md border-gray-200 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                    placeholder="+8801..."
                  />
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                {% comment %}
                <div>
                  <label class="text-sm font-medium">Blood Group</label>
                  <input
                    name="specialization"
                    id="editProfileBloodGroup2"
                    class="mt-1 block w-full rounded-md border-gray-200 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                    placeholder="e.g. Cardiologist"
                  />
                </div>
                {% endcomment %}
                <div>
                  <label
                    for="editProfileBloodGroup02"
                    class="block dark:text-white text-gray-700 font-semibold mb-2"
                    >Blood Group</label
                  >
                  <select
                    required
                    id="editProfileBloodGroup2"
                    name="editProfileBloodGroup02"
                    class="w-full border border-gray-300 rounded-lg px-3 py-2 dark:text-black text-gray-700 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                  >
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                  </select>
                </div>

                {% comment %}
                <div>
                  <label class="text-sm font-medium">Pescription Status</label>
                  <input
                    name="availability"
                    id="editProfilePescriptionStatus"
                    class="mt-1 block w-full rounded-md border-gray-200 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                    placeholder="Mon-Fri, 9am - 5pm"
                  />
                </div>

                {% endcomment %}
                <div>
                  <label
                    for="editProfilePescriptionStatusv"
                    class="block dark:text-white text-gray-700 font-semibold mb-2"
                    >Pescription Status</label
                  >
                  <select
                    id="editProfilePescriptionStatus"
                    name="editProfilePescriptionStatusv"
                    class="dark:text-black w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                  >
                    <option value="true" selected>True</option>
                    <option value="false">False</option>
                  </select>
                </div>

                <div>
                  <label
                    for="editProfileGenderv"
                    class="block dark:text-white text-gray-700 font-semibold mb-2"
                    >Gender</label
                  >
                  <select
                    required
                    id="editProfileGender"
                    name="editProfileGenderv"
                    class="dark:text-black w-full border border-gray-300 rounded-lg px-3 py-2 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                  >
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                  </select>
                </div>

                <div>
                  <label class="text-sm font-medium">Age</label>
                  <input
                    required
                    name="age"
                    id="editProfileAge"
                    class="dark:text-black mt-1 block w-full rounded-md border-gray-200 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                    placeholder="18"
                  />
                </div>
              </div>

              <div>
                <label class="text-sm font-medium">Address</label>
                <input
                  name="address"
                  id="editProfileAddress"
                  class="dark:text-black mt-1 block w-full rounded-md border-gray-200 dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                  placeholder="Street, City, Country"
                />
              </div>

              <div>
                <label class="text-sm font-medium">Short bio</label>
                <textarea
                  name="bio"
                  id="editProfileShortBio"
                  rows="4"
                  class="mt-1 block w-full rounded-md border-gray-200 dark:text-black dark:border-gray-600 shadow-sm focus:ring-2 focus:ring-indigo-200 p-2"
                  placeholder="Type your bio..."
                ></textarea>
              </div>

              <input
                id="editProfileUser_id"
                hidden
                value="{{request.user.id}}"
              />
              <div class="flex gap-3 justify-end mt-2 no-print">
                <a href="#" data-section="profileView" class="sidebar-link">
                  <button
                    type="button"
                    id="cancelBtn"
                    class="px-4 py-2 rounded-md border border-gray-300"
                  >
                    Cancel
                  </button>
                  <button
                    onclick="createOrUpdate()"
                    type="submit"
                    id="saveBtn"
                    class="px-5 py-2 rounded-md bg-indigo-600 text-white"
                  >
                    Save
                  </button>
                </a>
              </div>
            </section>
          </form>
        </section>

        <!--++++++++++ using for profile update close-->

        <!--Dashboard-->
        <section id="dashboard" class="content-section" data-aos="fade-up">
          <h1 class="text-3xl font-semibold text-gray-800 dark:text-white mb-6">
            Patient Dashboard
          </h1>
          <div
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"
          >
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-right"
              data-aos-delay="100"
            >
              <div class="p-4 sm:p-6 flex items-center justify-between">
                <div>
                  <p
                    class="text-sm font-medium text-gray-500 dark:text-gray-400"
                  >
                    Total Pescriptions
                  </p>
                  <p
                    id="total_pescription_count"
                    class="text-3xl font-bold text-gray-800 dark:text-white"
                  >
                    1,280
                  </p>
                </div>
                <div class="flex p-3 bg-blue-100 dark:bg-blue-900 rounded-full">
                  <ion-icon
                    name="people-circle-outline"
                    class="text-2xl text-blue-500 dark:text-blue-400"
                  ></ion-icon>
                </div>
              </div>
            </div>
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-right"
              data-aos-delay="200"
            >
              <div class="p-4 sm:p-6 flex items-center justify-between">
                <div>
                  <p
                    class="text-sm font-medium text-gray-500 dark:text-gray-400"
                  >
                    Appointments Today
                  </p>
                  <p class="text-3xl font-bold text-gray-800 dark:text-white">
                    72
                  </p>
                </div>
                <div
                  class="flex p-3 bg-green-100 dark:bg-green-900 rounded-full"
                >
                  <ion-icon
                    name="calendar-number-outline"
                    class="text-2xl text-green-500 dark:text-green-400"
                  ></ion-icon>
                </div>
              </div>
            </div>
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-right"
              data-aos-delay="300"
            >
              <div class="p-4 sm:p-6 flex items-center justify-between">
                <div>
                  <p
                    class="text-sm font-medium text-gray-500 dark:text-gray-400"
                  >
                    Total Visited Doctors
                  </p>
                  <p
                    id="total_unique_doctors_count"
                    class="text-3xl font-bold text-gray-800 dark:text-white"
                  >
                    35
                  </p>
                </div>
                <div
                  class="flex p-3 bg-yellow-100 dark:bg-yellow-900 rounded-full"
                >
                  <ion-icon
                    name="fitness-outline"
                    class="text-2xl text-yellow-500 dark:text-yellow-400"
                  ></ion-icon>
                </div>
              </div>
            </div>
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-right"
              data-aos-delay="400"
            >
              <div class="p-4 sm:p-6 flex items-center justify-between">
                <div>
                  <p
                    class="text-sm font-medium text-gray-500 dark:text-gray-400"
                  >
                    Expences (This Month)
                  </p>
                  <p class="text-3xl font-bold text-gray-800 dark:text-white">
                    $25,670
                  </p>
                </div>
                <div
                  class="flex p-3 bg-indigo-100 dark:bg-indigo-900 rounded-full"
                >
                  <ion-icon
                    name="cash-outline"
                    class="text-2xl text-indigo-500 dark:text-indigo-400"
                  ></ion-icon>
                </div>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-up"
              data-aos-delay="500"
            >
              <div
                class="p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700"
              >
                <h2
                  class="text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Patient Admissions
                </h2>
              </div>
              <div class="p-4 sm:p-6">
                <canvas id="patientAdmissionsChart" height="200"></canvas>
              </div>
            </div>
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-up"
              data-aos-delay="600"
            >
              <div
                class="p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700"
              >
                <h2
                  class="text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Department Popularity
                </h2>
              </div>
              <div class="p-4 sm:p-6">
                <canvas id="departmentPopularityChart" height="200"></canvas>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300 md:col-span-1"
            >
              <div
                class="p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700"
              >
                <h2
                  class="text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Quick Links
                </h2>
              </div>
              <div class="p-4 sm:p-6 space-y-3">
                <a
                  href="#"
                  data-section="appointments"
                  class="sidebar-link flex items-center p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors"
                >
                  <ion-icon
                    name="add-circle-outline"
                    class="text-xl text-blue-500 mr-3"
                  ></ion-icon>
                  <span
                    class="text-sm font-medium text-gray-700 dark:text-gray-300"
                    >New Appointment</span
                  >
                </a>
                <a
                  href="#"
                  data-section="patients"
                  class="sidebar-link flex items-center p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors"
                >
                  <ion-icon
                    name="person-add-outline"
                    class="text-xl text-green-500 mr-3"
                  ></ion-icon>
                  <span
                    class="text-sm font-medium text-gray-700 dark:text-gray-300"
                    >Upload Pescription</span
                  >
                </a>
                <a
                  href="#"
                  data-section="records"
                  class="sidebar-link flex items-center p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors"
                >
                  <ion-icon
                    name="receipt-outline"
                    class="text-xl text-yellow-500 mr-3"
                  ></ion-icon>
                  <span
                    class="text-sm font-medium text-gray-700 dark:text-gray-300"
                    >Upload Report</span
                  >
                </a>
              </div>
            </div>
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300 md:col-span-2"
            >
              <div
                class="p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700"
              >
                <h2
                  class="text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Recent Activity
                </h2>
              </div>
              <div class="p-4 sm:p-6">
                <ul class="space-y-4">
                  <li class="flex items-start space-x-3">
                    <img
                      src="https://www.codewithfaraz.com/tools/placeholder?size=26&bgColor=A0AEC0&textColor=FFFFFF&text=JD"
                      class="h-8 w-8 rounded-full"
                      alt="User"
                    />
                    <div>
                      <p class="text-sm text-gray-700 dark:text-gray-300">
                        <strong class="font-medium">John Doe</strong> checked in
                        for appointment with
                        <strong class="font-medium">Dr. Smith</strong>.
                      </p>
                      <p class="text-xs text-gray-500 dark:text-gray-400">
                        10 minutes ago
                      </p>
                    </div>
                  </li>
                  <li class="flex items-start space-x-3">
                    <img
                      src="https://www.codewithfaraz.com/tools/placeholder?size=26&bgColor=4A5568&textColor=FFFFFF&text=SA"
                      class="h-8 w-8 rounded-full"
                      alt="User"
                    />
                    <div>
                      <p class="text-sm text-gray-700 dark:text-gray-300">
                        <strong class="font-medium">Sarah Adams</strong> updated
                        patient record for
                        <strong class="font-medium">#P00123</strong>.
                      </p>
                      <p class="text-xs text-gray-500 dark:text-gray-400">
                        45 minutes ago
                      </p>
                    </div>
                  </li>
                  <li class="flex items-start space-x-3">
                    <img
                      src="https://www.codewithfaraz.com/tools/placeholder?size=26&bgColor=9F7AEA&textColor=FFFFFF&text=MJ"
                      class="h-8 w-8 rounded-full"
                      alt="User"
                    />
                    <div>
                      <p class="text-sm text-gray-700 dark:text-gray-300">
                        New prescription added for
                        <strong class="font-medium">Michael Johnson</strong> by
                        <strong class="font-medium">Dr. Lee</strong>.
                      </p>
                      <p class="text-xs text-gray-500 dark:text-gray-400">
                        1 hour ago
                      </p>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!--Pescription Management-->

        <section
          id="patients"
          class="content-section hidden"
          data-aos="fade-up"
        >
          <h1 class="text-3xl font-semibold text-gray-800 dark:text-white mb-6">
            Pescription Management
          </h1>
          <div
            class="mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center"
          >
            <div class="flex space-x-2 mb-4 sm:mb-0">
              <input
                type="text"
                placeholder="Search Pescriptions..."
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 w-full sm:w-auto"
              />
            </div>
            <button
              class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500"
            >
              <ion-icon name="add-circle-outline" class="mr-1 -ml-1"></ion-icon>
              Upload a Pescription
            </button>
          </div>
          <div
            class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
          >
            <div
              id="pescription_table_container"
              class="p-4 sm:p-6 overflow-x-auto"
            >
              <table
                class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm"
              >
                <thead class="bg-gray-50 dark:bg-gray-700">
                  <tr>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      ID
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Doctor Name
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Diagnosis
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Visited Date
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Medicine
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Actions
                    </th>
                  </tr>
                </thead>
                <tbody
                  id="pescription_list"
                  class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                ></tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="doctors" class="content-section hidden" data-aos="fade-up">
          <h1 class="text-3xl font-semibold text-gray-800 dark:text-white mb-6">
            Visited Doctors
          </h1>
          <div
            class="mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center"
          >
            <div class="flex space-x-2 mb-4 sm:mb-0">
              <input
                type="text"
                placeholder="Search doctors..."
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 w-full sm:w-auto"
              />
              <select
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700"
              >
                <option>Filter by Speciality</option>
                <option>Cardiology</option>
                <option>Neurology</option>
                <option>Pediatrics</option>
              </select>
            </div>
          </div>
          <div
            id="total_unique_doctors_ditels"
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
          >
            <h1>No Available doctors......</h1>
          </div>
        </section>

        <section
          id="appointments"
          class="content-section hidden"
          data-aos="fade-up"
        >
          <h1 class="text-3xl font-semibold text-gray-800 dark:text-white mb-6">
            Appointment Scheduling
          </h1>
          <div
            class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
          >
            <div class="p-4 sm:p-6">
              <div id="calendar" class="h-[600px] min-h-[500px]"></div>
            </div>
          </div>
        </section>

        <section id="billing" class="content-section hidden" data-aos="fade-up">
          <h1 class="text-3xl font-semibold text-gray-800 dark:text-white mb-6">
            Billing and Invoices
          </h1>
          <div
            class="mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center"
          >
            <input
              type="text"
              placeholder="Search invoices by ID or Patient Name..."
              class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 w-full sm:w-1/2 mb-4 sm:mb-0"
            />
            <button
              id="createInvoiceBtn"
              class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500"
            >
              <ion-icon
                name="document-attach-outline"
                class="mr-1 -ml-1"
              ></ion-icon>
              Create New Invoice
            </button>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-up"
            >
              <div
                class="p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"
              >
                <h3
                  class="text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Invoice #INV001
                </h3>
                <span
                  class="text-xs font-semibold py-1 px-2.5 rounded-full bg-green-100 text-green-700 dark:bg-green-700 dark:text-green-100"
                  >Paid</span
                >
              </div>
              <div class="p-4 sm:p-6 space-y-3 text-sm">
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Patient:</strong
                  >
                  John Doe
                </p>
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Date:</strong
                  >
                  2024-05-10
                </p>
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Amount:</strong
                  >
                  $150.00
                </p>
                <div
                  class="pt-2 border-t border-gray-200 dark:border-gray-700 flex space-x-2"
                >
                  <button
                    class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 focus:ring-gray-400 btn-sm flex-1 text-xs"
                  >
                    View Details
                  </button>
                  <button
                    class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 btn-sm flex-1 text-xs"
                  >
                    Download PDF
                  </button>
                </div>
              </div>
            </div>
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-up"
              data-aos-delay="100"
            >
              <div
                class="p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"
              >
                <h3
                  class="text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Invoice #INV002
                </h3>
                <span
                  class="text-xs font-semibold py-1 px-2.5 rounded-full bg-yellow-100 text-yellow-700 dark:bg-yellow-700 dark:text-yellow-100"
                  >Pending</span
                >
              </div>
              <div class="p-4 sm:p-6 space-y-3 text-sm">
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Patient:</strong
                  >
                  Jane Smith
                </p>
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Date:</strong
                  >
                  2024-05-12
                </p>
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Amount:</strong
                  >
                  $220.50
                </p>
                <div
                  class="pt-2 border-t border-gray-200 dark:border-gray-700 flex space-x-2"
                >
                  <button
                    class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 focus:ring-gray-400 btn-sm flex-1 text-xs"
                  >
                    View Details
                  </button>
                  <button
                    class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 btn-sm flex-1 text-xs"
                  >
                    Send Reminder
                  </button>
                </div>
              </div>
            </div>
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="fade-up"
              data-aos-delay="200"
            >
              <div
                class="p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"
              >
                <h3
                  class="text-lg sm:text-xl font-semibold text-gray-800 dark:text-gray-100"
                >
                  Invoice #INV003
                </h3>
                <span
                  class="text-xs font-semibold py-1 px-2.5 rounded-full bg-red-100 text-red-700 dark:bg-red-700 dark:text-red-100"
                  >Overdue</span
                >
              </div>
              <div class="p-4 sm:p-6 space-y-3 text-sm">
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Patient:</strong
                  >
                  Mike Brown
                </p>
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Date:</strong
                  >
                  2024-04-20
                </p>
                <p>
                  <strong class="text-gray-600 dark:text-gray-400"
                    >Amount:</strong
                  >
                  $85.00
                </p>
                <div
                  class="pt-2 border-t border-gray-200 dark:border-gray-700 flex space-x-2"
                >
                  <button
                    class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 focus:ring-gray-400 btn-sm flex-1 text-xs"
                  >
                    View Details
                  </button>
                  <button
                    class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-red-500 hover:bg-red-600 text-white focus:ring-red-400 btn-sm flex-1 text-xs"
                  >
                    Mark as Paid
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section
          id="pharmacy"
          class="content-section hidden"
          data-aos="fade-up"
        >
          <h1 class="text-3xl font-semibold text-gray-800 dark:text-white mb-6">
            Pharmacy Management
          </h1>
          <div
            class="mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center"
          >
            <div class="flex space-x-2 mb-4 sm:mb-0">
              <input
                type="text"
                placeholder="Search medicines..."
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 w-full sm:w-auto"
              />
              <select
                class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700"
              >
                <option>Filter by Category</option>
                <option>Analgesics</option>
                <option>Antibiotics</option>
                <option>Vitamins</option>
              </select>
            </div>
            <button
              class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500"
            >
              <ion-icon name="add-circle-outline" class="mr-1 -ml-1"></ion-icon>
              Add New Medicine
            </button>
          </div>
          <div
            class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
          >
            <div class="p-4 sm:p-6 overflow-x-auto">
              <table
                class="min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm"
              >
                <thead class="bg-gray-50 dark:bg-gray-700">
                  <tr>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Medicine ID
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Name
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Category
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Stock
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Price
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Status
                    </th>
                    <th
                      class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"
                    >
                      Actions
                    </th>
                  </tr>
                </thead>
                <tbody
                  class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"
                >
                  <tr data-aos="fade-in">
                    <td class="px-6 py-4 whitespace-nowrap">MED001</td>
                    <td
                      class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-white"
                    >
                      Paracetamol 500mg
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">Analgesic</td>
                    <td class="px-6 py-4 whitespace-nowrap">250 units</td>
                    <td class="px-6 py-4 whitespace-nowrap">$5.00</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <span
                        class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100"
                        >In Stock</span
                      >
                    </td>
                    <td
                      class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"
                    >
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"
                      >
                        <ion-icon name="eye-outline"></ion-icon>
                      </button>
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300"
                      >
                        <ion-icon name="pencil-outline"></ion-icon>
                      </button>
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"
                      >
                        <ion-icon name="trash-outline"></ion-icon>
                      </button>
                    </td>
                  </tr>
                  <tr data-aos="fade-in" data-aos-delay="50">
                    <td class="px-6 py-4 whitespace-nowrap">MED002</td>
                    <td
                      class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-white"
                    >
                      Amoxicillin 250mg
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">Antibiotic</td>
                    <td class="px-6 py-4 whitespace-nowrap">120 units</td>
                    <td class="px-6 py-4 whitespace-nowrap">$12.50</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <span
                        class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100"
                        >In Stock</span
                      >
                    </td>
                    <td
                      class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"
                    >
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"
                      >
                        <ion-icon name="eye-outline"></ion-icon>
                      </button>
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300"
                      >
                        <ion-icon name="pencil-outline"></ion-icon>
                      </button>
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"
                      >
                        <ion-icon name="trash-outline"></ion-icon>
                      </button>
                    </td>
                  </tr>
                  <tr data-aos="fade-in" data-aos-delay="100">
                    <td class="px-6 py-4 whitespace-nowrap">MED003</td>
                    <td
                      class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-white"
                    >
                      Vitamin C 1000mg
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">Vitamin</td>
                    <td class="px-6 py-4 whitespace-nowrap">0 units</td>
                    <td class="px-6 py-4 whitespace-nowrap">$8.75</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <span
                        class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark:bg-red-700 dark:text-red-100"
                        >Out of Stock</span
                      >
                    </td>
                    <td
                      class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"
                    >
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"
                      >
                        <ion-icon name="eye-outline"></ion-icon>
                      </button>
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300"
                      >
                        <ion-icon name="pencil-outline"></ion-icon>
                      </button>
                      <button
                        class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"
                      >
                        <ion-icon name="trash-outline"></ion-icon>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="records" class="content-section hidden" data-aos="fade-up">
          <h1 class="text-3xl font-semibold text-gray-800 dark:text-white mb-6">
            Medical Records
          </h1>
          <div
            class="mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center"
          >
            <input
              type="text"
              placeholder="Search records by Patient ID or Name..."
              class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 w-full sm:w-1/2 mb-4 sm:mb-0"
            />
            <button
              id="uploadRecordBtn"
              class="px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500"
            >
              <ion-icon
                name="cloud-upload-outline"
                class="mr-1 -ml-1"
              ></ion-icon>
              Upload New Record
            </button>
          </div>
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
          >
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="zoom-in-up"
            >
              <div class="p-2">
                <div class="flex items-center space-x-3 mb-3">
                  <ion-icon
                    name="document-attach-outline"
                    class="text-3xl text-blue-500"
                  ></ion-icon>
                  <div>
                    <h4 class="font-semibold text-gray-800 dark:text-white">
                      Blood Test Report.pdf
                    </h4>
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                      Patient: John Doe (P001)
                    </p>
                  </div>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">
                  Uploaded: 2024-05-01 by Dr. Smith
                </p>
                <p class="text-xs text-gray-500 dark:text-gray-400 mb-3">
                  Size: 1.2 MB
                </p>
                <div class="flex space-x-2">
                  <button
                    class="flex items-center content-center px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 focus:ring-gray-400 btn-sm text-xs flex-1"
                  >
                    <ion-icon name="eye-outline" class="mr-1"></ion-icon>Preview
                  </button>
                  <button
                    class="flex items-center content-center px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 btn-sm text-xs flex-1"
                  >
                    <ion-icon name="download-outline" class="mr-1"></ion-icon
                    >Download
                  </button>
                </div>
              </div>
            </div>
            <div
              class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
              data-aos="zoom-in-up"
              data-aos-delay="100"
            >
              <div class="p-2">
                <div class="flex items-center space-x-3 mb-3">
                  <ion-icon
                    name="image-outline"
                    class="text-3xl text-green-500"
                  ></ion-icon>
                  <div>
                    <h4 class="font-semibold text-gray-800 dark:text-white">
                      X-Ray_Chest.jpg
                    </h4>
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                      Patient: Jane Smith (P002)
                    </p>
                  </div>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">
                  Uploaded: 2024-04-25 by Dr. Lee
                </p>
                <p class="text-xs text-gray-500 dark:text-gray-400 mb-3">
                  Size: 3.5 MB
                </p>
                <div class="flex space-x-2">
                  <button
                    class="flex items-center content-center px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 focus:ring-gray-400 btn-sm text-xs flex-1"
                  >
                    <ion-icon name="eye-outline" class="mr-1"></ion-icon>Preview
                  </button>
                  <button
                    class="flex items-center content-center px-4 py-2 rounded-lg font-medium transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-800 bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 btn-sm text-xs flex-1"
                  >
                    <ion-icon name="download-outline" class="mr-1"></ion-icon
                    >Download
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="{% static 'users_style/patient_dashboard/script.js' %}"></script>

    <script>
      // working with rest api
      const API_BASE = "http://127.0.0.1:8000/api";
      //  Get auth token (if using JWT OR session cookie)
      function getHeaders() {
        return {
          "Content-Type": "application/json",
        };
      }

      // get & show all pescriptions

      //  1) Get All Prescriptions
      async function getAllPrescriptions() {
        const res = await fetch(`${API_BASE}/prescriptions`);
        data = await res.json();
        //console.log(res.json());
        return data;
      }

      async function load_All_pescriptions() {
        const data = await getAllPrescriptions();
        let patient_id = await find_patient_id();
        //console.log(data.length);

        if (data.length == 0) {
          const pescriptionTableContainer = document.getElementById(
            "pescription_table_container"
          );
          pescriptionTableContainer.innerHTML = "No pescription......";
        } else {
          const tbody = document.getElementById("pescription_list");
          tbody.innerHTML = "";

          data.forEach((p) => {
            if (patient_id == p.patient.id) {
              const tr = document.createElement("tr");

              tr.innerHTML = `


                                          <td class="px-6 py-4 whitespace-nowrap">${
                                            p.id
                                          }</td>
                                          <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-white">${
                                            p.doctor.user.first_name
                                          } ${p.doctor.user.last_name}</td>
                                          <td class="px-6 py-4 whitespace-nowrap">${
                                            p.diagnosis
                                          }</td>

                                          <td class="px-6 py-4 whitespace-nowrap">${
                                            p.created_at.split("T")[0]
                                          }</td>
                                          <td class="px-6 py-4 whitespace-nowrap">
                                              <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100">${p.medicines
                                                .map((m) => m.medicine_name)
                                                .join(", ")}</span>
                                          </td>
                                          <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2">
                                              <button class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"><ion-icon name="eye-outline"></ion-icon></button>
                                              <button class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300"><ion-icon name="pencil-outline"></ion-icon></button>
                                              <button class="inline-flex p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"><ion-icon name="trash-outline"></ion-icon></button>
                                          </td>

              `;

              tbody.appendChild(tr);
            }
          });
        }
      }

      <!--Patient personal Ditels-->
      const user_id = document.getElementById("get_user_id").value;
      //console.log("user id :" , user_id);

      async function GetAllPatientDitels() {
        let res = await fetch(`${API_BASE}/patients`);
        return res.json();
      }

      async function find_patient_id() {
        let data = await GetAllPatientDitels();
        let patient_id = -1;
        data.forEach((v) => {
          if (v.user.id == user_id) {
            patient_id = v.id;
          }
        });

        return patient_id;
      }

      async function GetSinglePatientDitels() {
        let patient_id = await find_patient_id();
        //console.log("patient_ id : ", patient_id);
        let res = await fetch(`${API_BASE}/patients/${patient_id}`);

        return res.json();
      }

      async function set_patient_Name() {
        let data = await GetSinglePatientDitels();
        //console.log("user data : ", data);
        const patientName02 = document.getElementById("patient_name_02");
        patientName02.innerHTML = "";
        patientName02.innerHTML = `${data.user.first_name} ${data.user.last_name}`;

        const patientName01 = document.getElementById("patient_name_01");
        patientName01.innerHTML = "";
        patientName01.innerHTML = `${data.user.last_name}`;
      }

      function bloodIndexFind(blood_group) {
        if (blood_group == "A+") {
          return 0;
        } else if (blood_group == "A-") {
          return 1;
        } else if (blood_group == "B+") {
          return 2;
        } else if (blood_group == "B-") {
          return 3;
        } else if (blood_group == "AB+") {
          return 4;
        } else if (blood_group == "AB-") {
          return 5;
        } else if (blood_group == "O+") {
          return 6;
        } else if (blood_group == "O-") {
          return 7;
        }
      }

      function genderIndexFind(gender) {
        if (gender == "Male") {
          return 0;
        } else if (gender == "Female") {
          return 1;
        }
      }

      // show patient profile all ditels
      async function set_patient_profile_ditels() {
        let data = await GetSinglePatientDitels();

        //console.log(data);

        // set data -> html

        const profileName = document.getElementById("profileName");
        const profileBloodGroup1 =
          document.getElementById("profileBloodGroup1");
        const profileBloodGroup2 =
          document.getElementById("profileBloodGroup2");
        //const profileFullName = document.getElementById("profileFullName");
        const profileEmail = document.getElementById("profileEmail");
        const profilePhone = document.getElementById("profilePhone");
        const profilePescriptionStatus = document.getElementById(
          "profilePescriptionStatus"
        );
        const profileGender = document.getElementById("profileGender");
        const profileAge = document.getElementById("profileAge");
        const profileAddress = document.getElementById("profileAddress");
        const profileShortBio = document.getElementById("profileShortBio");

        profileName.innerHTML = `${data.user.first_name} ${data.user.last_name}`;
        // profileFullName.innerHTML = `${data.user.first_name} ${data.user.last_name}`;
        profileBloodGroup1.innerHTML = `${data.blood_group} `;
        profileBloodGroup2.innerHTML = `${data.blood_group} `;
        profileEmail.innerHTML = `${data.user.email} `;
        profilePhone.innerHTML = `${data.phone_number} `;
        profileGender.innerHTML = `${data.gender} `;
        profileAge.innerHTML = `${data.age} `;
        profilePescriptionStatus.innerHTML = `${data.visible_to_doctors}`;
        profileAddress.innerHTML = `${data.address} `;
        profileShortBio.innerHTML = `${data.short_bio} `;

        // edit page
        const editProfileName = document.getElementById("editProfileName");
        const editProfileBloodGroup1 = document.getElementById(
          "editProfileBloodGroup1"
        );
        const editProfileBloodGroup2 = document.getElementById(
          "editProfileBloodGroup2"
        );
        const editProfileFastName = document.getElementById(
          "editProfileFastName"
        );
        const editProfileLastName = document.getElementById(
          "editProfileLastName"
        );
        const editProfileEmail = document.getElementById("editProfileEmail");
        const editProfilePhone = document.getElementById("editProfilePhone");
        const editProfileGender = document.getElementById("editProfileGender");
        const editProfileAge = document.getElementById("editProfileAge");
        const editProfilePescriptionStatus = document.getElementById(
          "editProfilePescriptionStatus"
        );
        const editProfileAddress =
          document.getElementById("editProfileAddress");
        const editProfileShortBio = document.getElementById(
          "editProfileShortBio"
        );

        editProfileName.innerHTML = `${data.user.first_name} ${data.user.last_name}`;
        editProfileBloodGroup1.innerHTML = `${data.blood_group} `;
        editProfileFastName.value = `${data.user.first_name} `;
        editProfileLastName.value = `${data.user.last_name}`;
        editProfileBloodGroup1.value = `${data.blood_group} `;

        editProfileEmail.value = `${data.user.email} `;
        editProfilePhone.value = `${data.phone_number} `;
        editProfileGender.selectedIndex = genderIndexFind(data.gender);
        editProfileAge.value = `${data.age} `;
        editProfileBloodGroup2.selectedIndex = bloodIndexFind(data.blood_group);
        editProfilePescriptionStatus.value = `${data.visible_to_doctors}`;
        editProfileAddress.value = `${data.address} `;
        editProfileShortBio.value = `${data.short_bio} `;
      }




      // working for every patient total pescription
      async function getPatientCount(id) {
        const res = await fetch(
          `http://127.0.0.1:8000/api/prescription-count/?patient_id=${id}`
        );
        const data = await res.json();
        //console.log(data);
        return data;
      }

      async function set_patient_total_pescriptions() {
        let patient_id = await find_patient_id();
        let data = await getPatientCount(patient_id);
        //console.log(data);
        const totalPescriptionCount = document.getElementById(
          "total_pescription_count"
        );
        totalPescriptionCount.innerHTML = "";
        totalPescriptionCount.innerHTML = `${data.total_prescriptions}`;
      }

      // working for every patient total unique doctors
      async function getPatientUniqueDoctorsCount(id) {
        const res = await fetch(
          `http://127.0.0.1:8000/api/analytics/unique-doctors/?patient_id=${id}`
        );
        const data = await res.json();
        //console.log(data);
        return data;
      }

      async function set_patient_total_unique_doctors() {
        let patient_id = await find_patient_id();
        let data = await getPatientUniqueDoctorsCount(patient_id);
        //console.log(data);
        const totalUniqueDoctorsCount = document.getElementById(
          "total_unique_doctors_count"
        );
        totalUniqueDoctorsCount.innerHTML = "";
        totalUniqueDoctorsCount.innerHTML = `${data.unique_doctor_count}`;
      }

      // working for every patient total unique doctors ditels
      async function getPatientUniqueDoctorsDitels(id) {
        const res = await fetch(
          `http://127.0.0.1:8000/api/analytics/unique-doctors/details/?patient_id=${id}`
        );
        const data = await res.json();
        //console.log(data);
        return data;
      }

      async function set_patient_total_unique_doctors_ditels() {
        let patient_id = await find_patient_id();
        let data = await getPatientUniqueDoctorsDitels(patient_id);
        // console.log(data);
        const totalUniqueDoctorsDitels = document.getElementById(
          "total_unique_doctors_ditels"
        );
        totalUniqueDoctorsDitels.innerHTML = "";

        data.doctors.forEach((d) => {
          totalUniqueDoctorsDitels.innerHTML = `

                              <div
                    class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300"
                    data-aos="zoom-in"
                  >
                    <div class="p-6 flex flex-col items-center text-center">
                      <img
                        src="https://www.codewithfaraz.com/tools/placeholder?size=80&bgColor=E2E8F0&textColor=4A5568&text=Dr.S"
                        class="w-24 h-24 rounded-full mb-4 shadow-md"
                        alt="Doctor"
                      />
                      <h3 class="text-xl font-semibold text-gray-800 dark:text-white">
                        ${d.name}
                      </h3>
                      <p class="text-sm text-blue-500 dark:text-blue-400">
                        ${d.specialization}
                      </p>
                      <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                        ${d.qualification}
                      </p>
                      <div class="mt-3 text-xs space-y-1">
                        <p
                          class="flex items-center justify-center text-gray-600 dark:text-gray-300"
                        >
                          <ion-icon
                            name="time-outline"
                            class="mr-1 text-green-500"
                          ></ion-icon>
                          Available: ${d.available_days}, ${d.available_time}
                        </p>
                        <p
                          class="flex items-center justify-center text-gray-600 dark:text-gray-300"
                        >
                          <ion-icon
                            name="call-outline"
                            class="mr-1 text-blue-500"
                          ></ion-icon>
                          <a href="tel:${d.phone_number}">${d.phone_number}</a>

                        </p>
                      </div>

                    </div>
                  </div>

                  `;
        });
      }

      // default call function + dashboard call function
      function dashboard() {
        set_patient_Name();
        set_patient_total_pescriptions();
        set_patient_total_unique_doctors();
      }

      dashboard();

    

      // csrf token get from html

      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
          const cookies = document.cookie.split("; ");
          for (let cookie of cookies) {
            if (cookie.startsWith(name + "=")) {
              cookieValue = cookie.substring(name.length + 1);
              break;
            }
          }
        }
        return cookieValue;
      }

      // create patient

      async function addPatient() {
        // edit page

        const editProfileUser_id =
          document.getElementById("editProfileUser_id");
        const editProfilePhone = document.getElementById("editProfilePhone");
        const editProfilePescriptionStatus = document.getElementById(
          "editProfilePescriptionStatus"
        );
        const editProfileBloodGroup2 = document.getElementById(
          "editProfileBloodGroup2"
        );
        const editProfileAge = document.getElementById("editProfileAge");
        const editProfileGender = document.getElementById("editProfileGender");
        const editProfileAddress =
          document.getElementById("editProfileAddress");
        const editProfileShortBio = document.getElementById(
          "editProfileShortBio"
        );

        // value to json
        const fromDataJson = {
          user_id: editProfileUser_id.value,
          phone_number: editProfilePhone.value,
          gender: editProfileGender.value,
          blood_group: editProfileBloodGroup2.value,
          age: editProfileAge.value,
          address: editProfileAddress.value,
          short_bio: editProfileShortBio.value,
          visible_to_doctors: editProfilePescriptionStatus.value,
        };
        //console.log(fromDataJson);

        const csrftoken = getCookie("csrftoken");

        const response = await fetch("http://127.0.0.1:8000/api/patients/", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-CSRFToken": csrftoken,
          },
          body: JSON.stringify(fromDataJson),
        });

        const result = await response.json();
        //console.log(result);
        set_patient_profile_ditels();
        set_patient_Name();
      }

      // patient update
      async function updatePatient(patientId) {
        // edit page

        const editProfilePhone = document.getElementById("editProfilePhone");
        const editProfilePescriptionStatus = document.getElementById(
          "editProfilePescriptionStatus"
        );
        const editProfileBloodGroup2 = document.getElementById(
          "editProfileBloodGroup2"
        );
        const editProfileAge = document.getElementById("editProfileAge");
        const editProfileGender = document.getElementById("editProfileGender");
        const editProfileAddress =
          document.getElementById("editProfileAddress");
        const editProfileShortBio = document.getElementById(
          "editProfileShortBio"
        );

        // value to json
        const fromDataJson = {
          phone_number: editProfilePhone.value,
          gender: editProfileGender.value,
          blood_group: editProfileBloodGroup2.value,
          age: editProfileAge.value,
          address: editProfileAddress.value,
          short_bio: editProfileShortBio.value,
          visible_to_doctors: editProfilePescriptionStatus.value,
        };

        // console.log(fromDataJson);
        //console.log("get data to form");
        const csrftoken = getCookie("csrftoken");

        const response = await fetch(
          `http://127.0.0.1:8000/api/patients/${patientId}/`,
          {
            method: "PATCH",
            headers: {
              "Content-Type": "application/json",
              "X-CSRFToken": csrftoken,
            },
            body: JSON.stringify(fromDataJson),
          }
        );

        const result = await response.json();
        //console.log(result);

        set_patient_profile_ditels();
      }

      // patient prodile create or update

      async function createOrUpdate() {
        let patientId = await find_patient_id(); // get patient id

        // update account
        if (patientId != -1) {
          //console.log("entry here", patientId);
          updatePatient(patientId);
        } else {
          // create new patient
          addPatient();
        }
      }
    </script>
  </body>
</html>
